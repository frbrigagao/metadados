import{_ as e,a,b as s,c as t}from"./CardTitle-dL6bsADl.js";import{_ as l,a as d,b as o,c as u,d as i}from"./TableRow-DD1rU9_T.js";import{_ as n,a as c}from"./TableHeader-CKDqzP-E.js";import{r,b as f,j as m,p as v,k as x,g as p,l as g,z as _,B as y,e as b,K as h,F as k,q as w,E as C,a8 as D,a7 as M,f as j}from"./index-BmE-4Faz.js";import{T as O,_ as P}from"./Progress-B4zAP95-.js";import{_ as A,a as T,b as S,c as E,d as N}from"./DialogTitle-DTRMjLAr.js";import{u as z}from"./useMetadataAnalysis-Dz93PJQV.js";import{S as L}from"./search-DJK5zVXo.js";import{I as F}from"./info-DXZZgJel.js";import{B as I}from"./building-COgMPXYO.js";import"./nullish-aV-w2MPu.js";import"./utils-D2IcfFci.js";const U={class:"space-y-6"},B={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},R={class:"text-2xl font-bold mt-2"},V={class:"text-2xl font-bold mt-2"},$={class:"text-2xl font-bold mt-2"},q={class:"text-2xl font-bold mt-2"},H={class:"relative"},J={class:"rounded-md border"},K={class:"flex flex-col items-center gap-2"},G={class:"text-sm text-muted-foreground"},Q={class:"flex items-center gap-2"},W={class:"text-xs text-muted-foreground"},X={key:0,class:"space-y-4"},Y={class:"flex items-center justify-between"},Z={class:"flex items-center gap-2 text-sm text-muted-foreground"},ee={key:0,class:"flex items-center gap-2"},ae={key:0,class:"grid grid-cols-2 gap-4"},se={class:"flex items-center gap-2"},te={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},le={class:"font-bold text-lg"},de={class:"space-y-1"},oe={class:"flex items-center gap-2"},ue={class:"text-sm"},ie={class:"grid grid-cols-3 gap-2 pt-2 border-t"},ne={class:"space-y-1"},ce={class:"flex items-center gap-1"},re={class:"text-xs font-medium"},fe={class:"space-y-1"},me={class:"flex items-center gap-1"},ve={class:"text-xs font-medium"},xe={class:"space-y-1"},pe={class:"flex items-center gap-1"},ge={class:"text-xs font-medium"},_e={class:"space-y-1 pt-2 border-t"},ye={class:"flex flex-wrap gap-1"},be={class:"space-y-1 pt-2 border-t"},he={class:"flex items-center gap-2"},ke={class:"text-sm"},we={class:"space-y-1 pt-2 border-t"},Ce={class:"flex items-center gap-2"},De={class:"text-sm text-muted-foreground leading-relaxed"},Me={key:1,class:"rounded-md border overflow-x-auto"},je={class:"flex items-center gap-2"},Oe={class:"font-bold"},Pe={class:"flex items-center gap-2"},Ae={class:"flex items-center gap-2"},Te={class:"flex items-center gap-2"},Se={class:"flex items-center gap-2"},Ee={class:"flex flex-wrap gap-1"},Ne={class:"flex items-center gap-2"},ze={class:"flex items-center gap-2"},Le={class:"text-sm text-muted-foreground leading-relaxed"},Fe={__name:"Compartilhamentos",setup(Fe){const{compartilhamentos:Ie,stats:Ue}=z(),Be=r(""),Re=r(!1),Ve=r(null),$e=f(()=>{if(!Be.value)return Ie.value;const e=Be.value.toLowerCase();return Ie.value.filter(a=>a.nome?.toLowerCase().includes(e)||a.classeProcessual?.toLowerCase().includes(e)||a.unidades.some(a=>a.toLowerCase().includes(e)))});function qe(e){return function(e){if(!Ve.value)return 0;let a=0;return Ve.value.items.forEach(s=>{Array.isArray(s.tipoDocumento)?s.tipoDocumento.includes(e)&&a++:s.tipoDocumento===e&&a++}),a}(e)>=2}function He(e,a){if(!e||0===e.length)return!1;return new Set(e.map(e=>e[a])).size>1}const Je=f(()=>!!Ve.value&&He(Ve.value.items,"metadadoDeProcesso")),Ke=f(()=>!!Ve.value&&He(Ve.value.items,"tipoMetadados")),Ge=f(()=>!!Ve.value&&He(Ve.value.items,"admiteMultiplos"));function Qe(e){return!0===e||"true"===e||"Sim"===e?"Sim":!1===e||"false"===e||"Não"===e?"Não":"Não informado"}return(r,f)=>(j(),m("div",U,[f[39]||(f[39]=v("div",null,[v("h1",{class:"text-3xl font-bold"},"Metadados Compartilhados"),v("p",{class:"text-muted-foreground"},"Metadados com nome idêntico solicitados por múltiplas unidades")],-1)),v("div",B,[x(g(a),null,{default:p(()=>[x(g(e),{class:"p-6"},{default:p(()=>[f[3]||(f[3]=v("div",{class:"text-sm font-medium text-muted-foreground"},"Total de Metadados",-1)),v("div",R,_(g(Ue).total),1)]),_:1})]),_:1}),x(g(a),null,{default:p(()=>[x(g(e),{class:"p-6"},{default:p(()=>[f[4]||(f[4]=v("div",{class:"text-sm font-medium text-muted-foreground"},"Compartilhados",-1)),v("div",V,_(g(Ie).length),1)]),_:1})]),_:1}),x(g(a),null,{default:p(()=>[x(g(e),{class:"p-6"},{default:p(()=>[f[5]||(f[5]=v("div",{class:"text-sm font-medium text-muted-foreground"},"Possíveis Conflitos",-1)),v("div",$,_(g(Ue).conflicts),1)]),_:1})]),_:1}),x(g(a),null,{default:p(()=>[x(g(e),{class:"p-6"},{default:p(()=>[f[6]||(f[6]=v("div",{class:"text-sm font-medium text-muted-foreground"},"Exclusivos (1 unidade)",-1)),v("div",q,_(g(Ue).orphans),1)]),_:1})]),_:1})]),x(g(a),null,{default:p(()=>[x(g(s),null,{default:p(()=>[x(g(t),{class:"text-lg"},{default:p(()=>[...f[7]||(f[7]=[y("Metadados Compartilhados",-1)])]),_:1})]),_:1}),x(g(e),{class:"space-y-4"},{default:p(()=>[v("div",H,[x(g(L),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),x(g(l),{modelValue:Be.value,"onUpdate:modelValue":f[0]||(f[0]=e=>Be.value=e),placeholder:"Buscar metadado...",class:"pl-9"},null,8,["modelValue"])]),v("div",J,[x(g(d),null,{default:p(()=>[x(g(n),null,{default:p(()=>[x(g(o),null,{default:p(()=>[x(g(c),null,{default:p(()=>[...f[8]||(f[8]=[y("Metadado",-1)])]),_:1}),x(g(c),null,{default:p(()=>[...f[9]||(f[9]=[y("Classe Processual",-1)])]),_:1}),x(g(c),null,{default:p(()=>[...f[10]||(f[10]=[y("Unidades",-1)])]),_:1}),x(g(c),null,{default:p(()=>[...f[11]||(f[11]=[y("Solicitações",-1)])]),_:1}),x(g(c),null,{default:p(()=>[...f[12]||(f[12]=[y("Conflito",-1)])]),_:1}),x(g(c),null,{default:p(()=>[...f[13]||(f[13]=[y("Intensidade",-1)])]),_:1}),x(g(c),null,{default:p(()=>[...f[14]||(f[14]=[y("Ações",-1)])]),_:1})]),_:1})]),_:1}),x(g(u),null,{default:p(()=>[0===$e.value.length?(j(),b(g(o),{key:0},{default:p(()=>[x(g(i),{colspan:7,class:"text-center py-8"},{default:p(()=>[v("div",K,[x(g(F),{class:"w-16 h-16 text-muted-foreground"}),f[15]||(f[15]=v("p",{class:"text-muted-foreground"},"Nenhum compartilhamento encontrado",-1))])]),_:1})]),_:1})):h("",!0),(j(!0),m(k,null,w($e.value,e=>(j(),b(g(o),{key:`${e.nome}-${e.classeProcessual}`,class:"hover:bg-muted/50"},{default:p(()=>[x(g(i),{class:"font-medium"},{default:p(()=>[y(_(e.nome),1)]),_:2},1024),x(g(i),null,{default:p(()=>[v("div",G,_(e.classeProcessual),1)]),_:2},1024),x(g(i),null,{default:p(()=>[x(g(C),{variant:"secondary"},{default:p(()=>[y(_(e.unidades.length)+" unidades",1)]),_:2},1024)]),_:2},1024),x(g(i),null,{default:p(()=>[v("strong",null,_(e.solicitacoes),1)]),_:2},1024),x(g(i),null,{default:p(()=>[e.conflito?(j(),b(g(C),{key:0,variant:"destructive",class:"flex items-center gap-1 w-fit"},{default:p(()=>[x(g(O),{class:"w-3 h-3"}),f[16]||(f[16]=y(" Sim ",-1))]),_:1})):(j(),b(g(C),{key:1,variant:"outline",class:"text-green-600 border-green-600"},{default:p(()=>[...f[17]||(f[17]=[y("Não",-1)])]),_:1}))]),_:2},1024),x(g(i),null,{default:p(()=>[v("div",Q,[x(g(P),{"model-value":Math.min(100,Math.max(0,100*(e.intensidade||0))),class:D(["w-20",e.intensidade>.1?"[&>div]:bg-red-500":e.intensidade>.05?"[&>div]:bg-yellow-500":"[&>div]:bg-green-500"])},null,8,["model-value","class"]),v("span",W,_((100*(e.intensidade||0)).toFixed(0))+"%",1)])]),_:2},1024),x(g(i),null,{default:p(()=>[x(g(M),{variant:"ghost",size:"sm",onClick:a=>function(e){Ve.value=e,Re.value=!0}(e)},{default:p(()=>[...f[18]||(f[18]=[y(" Detalhes ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})]),_:1}),x(g(N),{open:Re.value,"onUpdate:open":f[2]||(f[2]=e=>Re.value=e)},{default:p(()=>[x(g(A),{class:"max-w-6xl max-h-[85vh] overflow-y-auto"},{default:p(()=>[x(g(T),null,{default:p(()=>[x(g(S),null,{default:p(()=>[y("Detalhes: "+_(Ve.value?.nome),1)]),_:1})]),_:1}),Ve.value?(j(),m("div",X,[v("div",Y,[v("div",Z,[x(g(I),{class:"w-4 h-4"}),v("span",null,"Solicitações ("+_(Ve.value.items.length)+")",1)]),Ve.value.conflito?(j(),m("div",ee,[x(g(C),{variant:"destructive",class:"flex items-center gap-1"},{default:p(()=>[x(g(O),{class:"w-3 h-3"}),f[19]||(f[19]=y(" Possui Conflitos ",-1))]),_:1})])):h("",!0)]),2===Ve.value.items.length?(j(),m("div",ae,[(j(!0),m(k,null,w(Ve.value.items,(s,t)=>(j(),b(g(a),{key:t,class:"border-l-4 border-l-primary"},{default:p(()=>[x(g(e),{class:"pt-4 space-y-3"},{default:p(()=>[v("div",se,[v("div",te,[x(g(I),{class:"w-5 h-5 text-primary"})]),v("div",le,_(s.unidade),1)]),v("div",de,[v("div",oe,[Ve.value.hasClasseOverlap?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5 mr-1"}),f[20]||(f[20]=y(" Divergência ",-1))]),_:1})):h("",!0),f[21]||(f[21]=v("span",{class:"text-xs font-semibold text-muted-foreground"},"CLASSE PROCESSUAL",-1))]),v("div",ue,_(s.classeProcessual||"Não informado"),1)]),v("div",ie,[v("div",ne,[v("div",ce,[Je.value?(j(),b(g(C),{key:0,variant:"destructive",class:"h-4 px-1 text-[10px]"},{default:p(()=>[x(g(O),{class:"w-2 h-2"})]),_:1})):h("",!0),f[22]||(f[22]=v("span",{class:"text-xs font-semibold text-muted-foreground"},"METADADO DE PROCESSO",-1))]),v("div",re,_(Qe(s.metadadoDeProcesso)),1)]),v("div",fe,[v("div",me,[Ke.value?(j(),b(g(C),{key:0,variant:"destructive",class:"h-4 px-1 text-[10px]"},{default:p(()=>[x(g(O),{class:"w-2 h-2"})]),_:1})):h("",!0),f[23]||(f[23]=v("span",{class:"text-xs font-semibold text-muted-foreground"},"TIPO DE METADADOS",-1))]),v("div",ve,_(s.tipoMetadados||"Não informado"),1)]),v("div",xe,[v("div",pe,[Ge.value?(j(),b(g(C),{key:0,variant:"destructive",class:"h-4 px-1 text-[10px]"},{default:p(()=>[x(g(O),{class:"w-2 h-2"})]),_:1})):h("",!0),f[24]||(f[24]=v("span",{class:"text-xs font-semibold text-muted-foreground"},"ADMITE MÚLTIPLOS",-1))]),v("div",ge,_(Qe(s.admiteMultiplos)),1)])]),v("div",_e,[f[25]||(f[25]=v("span",{class:"text-xs font-semibold text-muted-foreground"},"TIPOS DE DOCUMENTO",-1)),v("div",ye,[Array.isArray(s.tipoDocumento)?(j(!0),m(k,{key:0},w(s.tipoDocumento,e=>(j(),b(g(C),{key:e,variant:qe(e)?"default":"secondary",class:D(qe(e)?"bg-green-600 hover:bg-green-700":"")},{default:p(()=>[y(_(e),1)]),_:2},1032,["variant","class"]))),128)):(j(),b(g(C),{key:1,variant:"secondary"},{default:p(()=>[y(_(s.tipoDocumento),1)]),_:2},1024))])]),v("div",be,[v("div",he,[Ve.value.hasFormatoConflict?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5 mr-1"}),f[26]||(f[26]=y(" Divergência ",-1))]),_:1})):h("",!0),f[27]||(f[27]=v("span",{class:"text-xs font-semibold text-muted-foreground"},"FORMATO",-1))]),v("div",ke,_(s.formatoMetadado||"Não especificado"),1)]),v("div",we,[v("div",Ce,[Ve.value.hasObjetivoConflict?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5 mr-1"}),f[28]||(f[28]=y(" Divergência ",-1))]),_:1})):h("",!0),f[29]||(f[29]=v("span",{class:"text-xs font-semibold text-muted-foreground"},"OBJETIVO",-1))]),v("div",De,_(s.objetivoMetadado||"Não especificado"),1)])]),_:2},1024)]),_:2},1024))),128))])):(j(),m("div",Me,[x(g(d),null,{default:p(()=>[x(g(n),null,{default:p(()=>[x(g(o),null,{default:p(()=>[x(g(c),{class:"w-[180px] font-bold sticky left-0 bg-background z-10"},{default:p(()=>[...f[30]||(f[30]=[y("Campo",-1)])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(c),{key:a,class:"min-w-[200px]"},{default:p(()=>[v("div",je,[x(g(I),{class:"w-4 h-4"}),v("span",Oe,_(e.unidade),1)])]),_:2},1024))),128))]),_:1})]),_:1}),x(g(u),null,{default:p(()=>[x(g(o),null,{default:p(()=>[x(g(i),{class:"font-semibold sticky left-0 bg-background z-10"},{default:p(()=>[v("div",Pe,[Ve.value.hasClasseOverlap?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5"})]),_:1})):h("",!0),f[31]||(f[31]=y(" Classe Processual ",-1))])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(i),{key:a},{default:p(()=>[y(_(e.classeProcessual||"Não informado"),1)]),_:2},1024))),128))]),_:1}),x(g(o),null,{default:p(()=>[x(g(i),{class:"font-semibold sticky left-0 bg-background z-10"},{default:p(()=>[v("div",Ae,[Je.value?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5"})]),_:1})):h("",!0),f[32]||(f[32]=y(" Metadado de Processo ",-1))])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(i),{key:a},{default:p(()=>[y(_(Qe(e.metadadoDeProcesso)),1)]),_:2},1024))),128))]),_:1}),x(g(o),null,{default:p(()=>[x(g(i),{class:"font-semibold sticky left-0 bg-background z-10"},{default:p(()=>[v("div",Te,[Ke.value?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5"})]),_:1})):h("",!0),f[33]||(f[33]=y(" Tipo de Metadados ",-1))])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(i),{key:a},{default:p(()=>[y(_(e.tipoMetadados||"Não informado"),1)]),_:2},1024))),128))]),_:1}),x(g(o),null,{default:p(()=>[x(g(i),{class:"font-semibold sticky left-0 bg-background z-10"},{default:p(()=>[v("div",Se,[Ge.value?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5"})]),_:1})):h("",!0),f[34]||(f[34]=y(" Admite Múltiplos ",-1))])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(i),{key:a},{default:p(()=>[y(_(Qe(e.admiteMultiplos)),1)]),_:2},1024))),128))]),_:1}),x(g(o),null,{default:p(()=>[x(g(i),{class:"font-semibold sticky left-0 bg-background z-10"},{default:p(()=>[...f[35]||(f[35]=[y("Tipos de Documento",-1)])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(i),{key:a},{default:p(()=>[v("div",Ee,[Array.isArray(e.tipoDocumento)?(j(!0),m(k,{key:0},w(e.tipoDocumento,e=>(j(),b(g(C),{key:e,variant:qe(e)?"default":"secondary",class:D(qe(e)?"bg-green-600 hover:bg-green-700":"")},{default:p(()=>[y(_(e),1)]),_:2},1032,["variant","class"]))),128)):(j(),b(g(C),{key:1,variant:"secondary"},{default:p(()=>[y(_(e.tipoDocumento),1)]),_:2},1024))])]),_:2},1024))),128))]),_:1}),x(g(o),null,{default:p(()=>[x(g(i),{class:"font-semibold sticky left-0 bg-background z-10"},{default:p(()=>[v("div",Ne,[Ve.value.hasFormatoConflict?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5"})]),_:1})):h("",!0),f[36]||(f[36]=y(" Formato ",-1))])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(i),{key:a},{default:p(()=>[y(_(e.formatoMetadado||"Não especificado"),1)]),_:2},1024))),128))]),_:1}),x(g(o),null,{default:p(()=>[x(g(i),{class:"font-semibold sticky left-0 bg-background z-10"},{default:p(()=>[v("div",ze,[Ve.value.hasObjetivoConflict?(j(),b(g(C),{key:0,variant:"destructive",class:"h-5 text-xs"},{default:p(()=>[x(g(O),{class:"w-2.5 h-2.5"})]),_:1})):h("",!0),f[37]||(f[37]=y(" Objetivo ",-1))])]),_:1}),(j(!0),m(k,null,w(Ve.value.items,(e,a)=>(j(),b(g(i),{key:a,class:"max-w-[300px]"},{default:p(()=>[v("div",Le,_(e.objetivoMetadado||"Não especificado"),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]))])):h("",!0),x(g(E),null,{default:p(()=>[x(g(M),{variant:"outline",onClick:f[1]||(f[1]=e=>Re.value=!1)},{default:p(()=>[...f[38]||(f[38]=[y(" Fechar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}};export{Fe as default};
