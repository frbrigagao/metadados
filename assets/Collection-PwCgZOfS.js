import{i as e}from"./utils-DZgixhoM.js";import{r as t,b as a,aw as l,aD as r,d as i,at as n,aE as o,h as s,aF as u,w as c,aG as m}from"./index-CrRnVzXM.js";function v(l){const r=e({dir:t("ltr")});return a(()=>l?.value||r.dir?.value||"ltr")}function f(){const e=t(),r=a(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:l(e));return{primitiveElement:e,currentElement:r}}const p="data-reka-collection-item";function d(e={}){const{key:l="",isProvider:v=!1}=e,d=`${l}CollectionProvider`;let E;if(v){const e=t(new Map),a=t();E={collectionRef:a,itemMap:e},m(d,E)}else E=r(d);const M=i({name:"CollectionSlot",setup(e,{slots:t}){const{primitiveElement:a,currentElement:l}=f();return c(l,()=>{E.collectionRef.value=l.value}),()=>s(u,{ref:a},t)}}),x=i({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(e,{slots:t,attrs:a}){const{primitiveElement:l,currentElement:r}=f();return n(t=>{if(r.value){const a=o(r.value);E.itemMap.value.set(a,{ref:r.value,value:e.value}),t(()=>E.itemMap.value.delete(a))}}),()=>s(u,{...a,[p]:"",ref:l},t)}});return{getItems:(e=!1)=>{const t=E.collectionRef.value;if(!t)return[];const a=Array.from(t.querySelectorAll(`[${p}]`)),l=Array.from(E.itemMap.value.values()).sort((e,t)=>a.indexOf(e.ref)-a.indexOf(t.ref));return e?l:l.filter(e=>""!==e.ref.dataset.disabled)},reactiveItems:a(()=>Array.from(E.itemMap.value.values())),itemMapSize:a(()=>E.itemMap.value.size),CollectionSlot:M,CollectionItem:x}}export{d as a,v as b,f as u};
